---
import { Globe, TrendingUp, BarChart3, Camera } from 'lucide-react';

const navItems = [
  { name: 'Home', href: '/', icon: Globe, hidden: false }, // Keep visible
  { name: 'Captured', href: '/photography', icon: Camera, hidden: true }, // Hide
  { name: 'Metrics', href: '/infrastructure', icon: BarChart3, hidden: true }, // Hide
  { name: 'Trends', href: '/trends', icon: TrendingUp, hidden: true }, // Hide
];

// Filter to only show items that are NOT hidden
const visibleItems = navItems.filter(item => !item.hidden);

const pathname = new URL(Astro.request.url).pathname;
const isCurrentPath = (href: string) => 
  pathname === href || (href !== '/' && pathname.startsWith(href));
---

<nav class="fixed bottom-[calc(env(safe-area-inset-bottom)+1.5rem)] lg:bottom-auto lg:top-8 left-0 right-0 z-[100] px-4 pointer-events-auto">
  <div class="max-w-[450px] lg:max-w-none lg:w-fit mx-auto flex items-center justify-around lg:justify-center gap-1 p-2 rounded-full border border-white/10 bg-[#050810]/90 backdrop-blur-3xl shadow-2xl">
    {visibleItems.map((item) => { // Using visibleItems here
      const Icon = item.icon;
      const active = isCurrentPath(item.href);
      
      return (
        <a 
          href={item.href}
          class:list={[
            "relative flex flex-col lg:flex-row items-center justify-center gap-1 lg:gap-2.5 px-4 lg:px-6 py-3 lg:py-2.5 rounded-full transition-all duration-500 group",
            active ? "text-blue-400" : "text-white/40 hover:text-white"
          ]}
        >
          {active && (
            <div class="absolute inset-0 bg-blue-500/10 rounded-full border border-blue-500/20 shadow-[0_0_15px_rgba(59,130,246,0.2)]"></div>
          )}

          <Icon 
            size={20} 
            strokeWidth={active ? 2.5 : 2} 
            class:list={[
              "shrink-0 transition-transform duration-500 group-hover:scale-110",
              active ? "drop-shadow-[0_0_8px_rgba(59,130,246,0.8)]" : ""
            ]} 
          />
          
          <span class="hidden lg:block text-[11px] font-mono font-black uppercase tracking-[0.2em] relative z-10 whitespace-nowrap">
            {item.name}
          </span>

          <div class:list={[
            "hidden lg:block absolute bottom-0 left-1/2 -translate-x-1/2 h-[2px] bg-blue-500 transition-all duration-500",
            active ? "w-1/3 opacity-100 shadow-[0_0_10px_#3b82f6]" : "w-0 opacity-0 group-hover:w-1/4 group-hover:opacity-50"
          ]}></div>
        </a>
      );
    })}
  </div>
</nav>